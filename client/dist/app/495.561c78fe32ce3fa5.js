"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[495],{7495:(S,d,u)=>{u.r(d),u.d(d,{ProfileModule:()=>q});var p=u(6773),f=u(5861),e=u(8256),m=u(8980),h=u(8914),a=u(6895),r=u(433),C=u(1094);function b(i,s){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const n=e.oxw();e.xp6(1),e.Oqu(n.label)}}let v=(()=>{class i{constructor(){this.phone="",this.phoneChange=new e.vpe}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["phone"]],inputs:{label:"label",phone:"phone",disabled:"disabled"},outputs:{phoneChange:"phoneChange"},decls:3,vars:5,consts:[[4,"ngIf"],["prefix","+38","mask","0 (00) 000-00-00","type","text",3,"disabled","ngModel","ngModelChange"]],template:function(n,t){1&n&&(e.TgZ(0,"div"),e.YNc(1,b,2,1,"div",0),e.TgZ(2,"input",1),e.NdJ("ngModelChange",function(l){return t.phone=l})("ngModelChange",function(l){return t.phoneChange.emit(l)}),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("ngIf",t.label),e.xp6(1),e.ekj("_disabled",t.disabled),e.Q6J("disabled",t.disabled)("ngModel",t.phone))},dependencies:[r.Fj,r.JJ,r.On,a.O5,C.Z6],styles:["._disabled[_ngcontent-%COMP%]{background-color:#574f4f80!important}"]}),i})();function M(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"div",25),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.deleteFile("avatar"))}),e.O4$(),e.TgZ(1,"svg",26),e._UZ(2,"path",27),e.qZA()()}}function P(i,s){1&i&&(e.TgZ(0,"span",28),e._uU(1,"\u0412\u0430\u0448\u0435 \u0444\u043e\u0442\u043e"),e.qZA())}function Z(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"img",29),e.NdJ("click",function(){e.CHM(n),e.oxw();const o=e.MAs(5);return e.KtG(o.click())}),e.qZA()}if(2&i){const n=e.oxw();e.Q6J("src",n.user.avatar,e.LSH)}}function T(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"div",25),e.NdJ("click",function(){e.CHM(n);const o=e.oxw();return e.KtG(o.deleteFile("document"))}),e.O4$(),e.TgZ(1,"svg",26),e._UZ(2,"path",27),e.qZA()()}}function x(i,s){1&i&&(e.TgZ(0,"span",28),e._uU(1,"\u0412\u0430\u0448\u0456 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438"),e.qZA())}function J(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"img",29),e.NdJ("click",function(){e.CHM(n),e.oxw();const o=e.MAs(14);return e.KtG(o.click())}),e.qZA()}if(2&i){const n=e.oxw();e.Q6J("src",n.user.document,e.LSH)}}function O(i,s){if(1&i&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&i){const n=s.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n," ")}}function E(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"div",32)(1,"button",33),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.us.logout())}),e._uU(2,"Logout"),e.qZA()()}}function U(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"div",32)(1,"button",34),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.updateUser())}),e._uU(2," Save "),e.qZA()()}if(2&i){const n=e.oxw(2);e.xp6(1),e.Q6J("disabled",n.isUserHasChanges)}}function y(i,s){if(1&i&&(e.TgZ(0,"div",30),e.YNc(1,E,3,0,"div",31),e.YNc(2,U,3,1,"div",31),e.qZA()),2&i){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.us.user._id===n.user._id),e.xp6(1),e.Q6J("ngIf",n.us.user._id===n.user._id)}}function N(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.startEditing())}),e._uU(1," \u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 "),e.qZA()}}function k(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.cancelEditing())}),e._uU(1," \u0412\u0456\u0434\u043c\u0456\u043d\u0438\u0442\u0438 "),e.qZA()}}function w(i,s){if(1&i){const n=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(n);const o=e.oxw(2);return e.KtG(o.updateUser())}),e._uU(1," \u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 "),e.qZA()}}function A(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,N,2,0,"button",35),e.YNc(2,k,2,0,"button",35),e.YNc(3,w,2,0,"button",35),e.qZA()),2&i){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",!n.isEditingEnabled),e.xp6(1),e.Q6J("ngIf",n.isEditingEnabled),e.xp6(1),e.Q6J("ngIf",n.isEditingEnabled)}}let c=(()=>{class i{constructor(n,t,o,l,Y){this.us=n,this.config=t,this._router=o,this._activatedRoute=l,this._location=Y,this.user={},this.oldUser={},this.isHttpLoading=!1,this.isEditingEnabled=!1,this.userId=this._activatedRoute.snapshot.params.id,this._location.onUrlChange(_=>{if(_.startsWith("/user/profile/")){const g=_.split("/")[3];if(g!==this.userId)return this.userId=g,void this.loadUser()}}),this.loadUser()}ngOnDestroy(){this._location.ngOnDestroy()}loadUser(){var n=this;return(0,f.Z)(function*(){if(!n.userId)return n.userId=n.us.user._id,void n._router.navigate([`/user/profile/${n.userId}`]);n.user=yield n.us.fetch(n.userId)})()}ngOnInit(){this.user=JSON.parse(JSON.stringify(this.us.user))}onFileUpload(n,t){const o=n.target?.files?.[0];o&&this.us.uploadImage(o,t,this.user._id).then(l=>{this.us.user[t]=l.data.filepath,this.user[t]=l.data.filepath,localStorage.setItem("user",JSON.stringify(this.us.user))})}updateUser(){this.isHttpLoading=!0,this.isEditingEnabled=!1,this.us.update(this.user).then(()=>{this.user._id===this.us.user._id&&(this.us.user=JSON.parse(JSON.stringify(this.user)),localStorage.setItem("user",JSON.stringify(this.user)))})}deleteFile(n){this.user[n]="",this.us.update(this.user)}startEditing(){this.oldUser=JSON.parse(JSON.stringify(this.user)),this.isEditingEnabled=!0}cancelEditing(){const n=JSON.parse(JSON.stringify(this.oldUser));this.user=n,this.isEditingEnabled=!1}get isUserHasChanges(){return JSON.stringify(this.us.user)===JSON.stringify(this.user)}get isUserCanEdit(){return!(this.us.user.admin&&this.isEditingEnabled||this.us.user._id===this.user._id)}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(m.K),e.Y36(h.E),e.Y36(p.F0),e.Y36(p.gz),e.Y36(a.Ye))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:44,vars:34,consts:[[1,"wrapper"],[1,"profile-wrap"],[1,"profile__photos"],[1,"file-upload"],["type","file","id","uploadAvatar","accept","image/*",1,"file-input",3,"disabled","change"],["avatarUpload",""],["class","file-delete",3,"click",4,"ngIf"],["for","uploadAvatar",1,"file-label"],[1,"file-icon"],["src","assets/icons/photo.svg","alt",""],["class","file-text",4,"ngIf"],["alt","Preview","class","preview-image",3,"src","click",4,"ngIf"],["type","file","id","uploadDocument","accept","image/*",1,"file-input",3,"disabled","change"],["documentUpload",""],["for","uploadDocument",1,"file-label"],[1,"profile__info"],[1,"label"],["type","text",3,"disabled","ngModel","ngModelChange"],["label","\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443",3,"disabled","phone","phoneChange"],[3,"disabled","ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["type","date",3,"disabled","ngModel","ngModelChange"],["class","profile__btns",4,"ngIf"],[4,"ngIf"],[1,"file-delete",3,"click"],["width","20","height","20","viewBox","0 0 20 20","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M19.4494 16.7994L12.65 10L19.4494 3.20057C20.1835 2.46648 20.1835 1.28465 19.4494 0.550566C18.7153 -0.183522 17.5335 -0.183522 16.7994 0.550566L10 7.34999L3.20057 0.550566C2.46648 -0.183522 1.28465 -0.183522 0.550566 0.550566C-0.183522 1.28465 -0.183522 2.46648 0.550566 3.20057L7.34999 10L0.550566 16.7994C-0.183522 17.5335 -0.183522 18.7153 0.550566 19.4494C1.28465 20.1835 2.46648 20.1835 3.20057 19.4494L10 12.65L16.7994 19.4494C17.5335 20.1835 18.7153 20.1835 19.4494 19.4494C20.1783 18.7153 20.1783 17.5283 19.4494 16.7994Z","fill","white"],[1,"file-text"],["alt","Preview",1,"preview-image",3,"src","click"],[1,"profile__btns"],["class","profile__logout",4,"ngIf"],[1,"profile__logout"],[1,"btn",3,"click"],[1,"btn",3,"disabled","click"],["class","btn",3,"click",4,"ngIf"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4,5),e.NdJ("change",function(l){return t.onFileUpload(l,"avatar")}),e.qZA(),e.YNc(6,M,3,0,"div",6),e.TgZ(7,"label",7)(8,"span",8),e._UZ(9,"img",9),e.qZA(),e.YNc(10,P,2,0,"span",10),e.qZA(),e.YNc(11,Z,1,1,"img",11),e.qZA(),e.TgZ(12,"div",3)(13,"input",12,13),e.NdJ("change",function(l){return t.onFileUpload(l,"document")}),e.qZA(),e.YNc(15,T,3,0,"div",6),e.TgZ(16,"label",14)(17,"span",8),e._UZ(18,"img",9),e.qZA(),e.YNc(19,x,2,0,"span",10),e.qZA(),e.YNc(20,J,1,1,"img",11),e.qZA()(),e.TgZ(21,"div",15)(22,"label",16),e._uU(23," \u041f\u0406\u0411 "),e.TgZ(24,"input",17),e.NdJ("ngModelChange",function(l){return t.user.fullName=l}),e.qZA()(),e.TgZ(25,"label",16)(26,"phone",18),e.NdJ("phoneChange",function(l){return t.user.phone=l}),e.qZA()(),e.TgZ(27,"label",16),e._uU(28," \u041c\u0456\u0441\u0442\u043e "),e.TgZ(29,"input",17),e.NdJ("ngModelChange",function(l){return t.user.city=l}),e.qZA()(),e.TgZ(30,"label",16),e._uU(31," \u0410\u0434\u0440\u0435\u0441\u0430 "),e.TgZ(32,"input",17),e.NdJ("ngModelChange",function(l){return t.user.address=l}),e.qZA()(),e.TgZ(33,"label",16),e._uU(34," \u0421\u043f\u0435\u0446\u0456\u0430\u043b\u0456\u0437\u0430\u0446\u0456\u044f "),e.TgZ(35,"select",19),e.NdJ("ngModelChange",function(l){return t.user.speciality=l}),e.TgZ(36,"option",20),e._uU(37,"\u041d\u0435 \u0432\u0438\u0431\u0440\u0430\u043d\u043e"),e.qZA(),e.YNc(38,O,2,2,"option",21),e.qZA()(),e.TgZ(39,"label",16),e._uU(40," \u0414\u0430\u0442\u0430 \u043d\u0430\u0440\u043e\u0434\u0436\u0435\u043d\u043d\u044f "),e.TgZ(41,"input",22),e.NdJ("ngModelChange",function(l){return t.user.birthday=l}),e.qZA()(),e.YNc(42,y,3,2,"div",23),e.YNc(43,A,4,3,"div",24),e.qZA()()()),2&n&&(e.xp6(4),e.Q6J("disabled",t.isUserCanEdit),e.xp6(2),e.Q6J("ngIf",t.user.avatar&&!t.isUserCanEdit),e.xp6(4),e.Q6J("ngIf",!t.user.avatar),e.xp6(1),e.Q6J("ngIf",t.user.avatar),e.xp6(2),e.Q6J("disabled",t.isUserCanEdit),e.xp6(2),e.Q6J("ngIf",t.user.document&&!t.isUserCanEdit),e.xp6(4),e.Q6J("ngIf",!t.user.document),e.xp6(1),e.Q6J("ngIf",t.user.document),e.xp6(4),e.ekj("_disabled",t.isUserCanEdit),e.Q6J("disabled",t.isUserCanEdit)("ngModel",t.user.fullName),e.xp6(2),e.Q6J("disabled",t.isUserCanEdit)("phone",t.user.phone),e.xp6(3),e.ekj("_disabled",t.isUserCanEdit),e.Q6J("disabled",t.isUserCanEdit)("ngModel",t.user.city),e.xp6(3),e.ekj("_disabled",t.isUserCanEdit),e.Q6J("disabled",t.isUserCanEdit)("ngModel",t.user.address),e.xp6(3),e.ekj("_disabled",t.isUserCanEdit),e.Q6J("disabled",t.isUserCanEdit)("ngModel",t.user.speciality),e.xp6(1),e.Q6J("value",void 0),e.xp6(2),e.Q6J("ngForOf",t.config.specialities),e.xp6(3),e.ekj("_disabled",t.isUserCanEdit),e.Q6J("disabled",t.isUserCanEdit)("ngModel",t.user.birthday),e.xp6(1),e.Q6J("ngIf",t.us.user._id===t.user._id),e.xp6(1),e.Q6J("ngIf",t.us.user.admin&&t.us.user._id!==t.user._id))},dependencies:[v,a.sg,a.O5,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.On],styles:[".file-upload[_ngcontent-%COMP%]{position:relative;display:inline-block}.file-input[_ngcontent-%COMP%]{display:none}.file-label[_ngcontent-%COMP%]{cursor:pointer;width:115px;height:153.655px;border-radius:16px;background:rgba(87,79,79,.7);-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);display:flex;flex-direction:column;align-items:center;justify-content:center}.file-icon[_ngcontent-%COMP%]{font-size:30px;margin-bottom:5px}.file-text[_ngcontent-%COMP%]{font-weight:700;text-align:center}.file-name[_ngcontent-%COMP%]{display:block;margin-top:10px}.file-delete[_ngcontent-%COMP%]{position:absolute;z-index:99;left:-5px;top:-5px}.file-change[_ngcontent-%COMP%]{position:absolute;z-index:99;right:-5px;top:-5px}.preview-image[_ngcontent-%COMP%]{display:block;width:115px;height:153.655px;margin-top:10px;border-radius:16px;object-fit:cover;position:absolute;top:-10px}.your-photo-text[_ngcontent-%COMP%]{display:block;margin-top:10px;text-align:center;font-weight:700}.profile__photos[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:20px}.profile__info[_ngcontent-%COMP%]{padding-top:50px}.profile__info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;margin-bottom:15px}.profile__info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-top:5px}.profile__info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#fff}.profile__info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.profile__info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.profile__info[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-top:5px;display:block;width:100%;border-radius:120px!important;background:rgba(87,79,79,.7)!important;color:#fff!important;font-family:Montserrat!important;font-size:16px!important;font-style:normal;font-weight:400;padding:15px!important}.profile__btns[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-flow:row wrap}.profile__btns[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:150px}._disabled[_ngcontent-%COMP%]{background:rgba(87,79,79,.5)!important}"]}),i})(),I=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[a.uU],imports:[a.ez,r.u5]}),i})();var F=u(294);const Q=[{path:"",component:c},{path:":id",component:c}];let q=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[I,F.I,a.ez,r.u5,p.Bz.forChild(Q)]}),i})()}}]);